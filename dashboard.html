<script>

function updateAWB(){

  const awb = document.getElementById("awb").value.trim();

  if(!awb){
    alert("Enter AWB");
    return;
  }

  let db = JSON.parse(localStorage.getItem("shipments")) || {};

  db[awb] = {
    awb: awb,
    bookingDate: document.getElementById("date").value,
    consignee: document.getElementById("consignee").value,
    destination: document.getElementById("destination").value,
    status: document.getElementById("status").value,
    deliveryDate: document.getElementById("deliveryDate").value,
    receiver: document.getElementById("receiver").value,
    deliveryAwb: document.getElementById("deliveryAwb").value,
    progress: []
  };

  localStorage.setItem("shipments", JSON.stringify(db));

  alert("Shipment Saved");

}

function addProgress(){

  const awb = document.getElementById("awb").value.trim();

  let db = JSON.parse(localStorage.getItem("shipments")) || {};
  if(!db[awb]){
    alert("Save AWB first");
    return;
  }

  db[awb].progress.unshift({
    date: document.getElementById("p_date").value,
    time: document.getElementById("p_time").value,
    location: document.getElementById("p_location").value,
    activity: document.getElementById("p_activity").value
  });

  localStorage.setItem("shipments", JSON.stringify(db));

  alert("Progress Added");

}

</script>
