<!DOCTYPE html>
<html>
<head>
<title>Shipment Dashboard</title>
</head>
<body>

<h2>Manage Shipment</h2>

<input type="text" id="awb" placeholder="AWB"><br>
<input type="text" id="date" placeholder="Booking Date"><br>
<input type="text" id="consignee" placeholder="Consignee"><br>
<input type="text" id="destination" placeholder="Destination"><br>
<input type="text" id="status" placeholder="Status"><br>
<input type="text" id="deliveryDate" placeholder="Delivery Date"><br>
<input type="text" id="receiver" placeholder="Receiver"><br>
<input type="text" id="deliveryAwb" placeholder="Delivery AWB"><br>

<button onclick="updateAWB()">Save Shipment</button>

<hr>

<h3>Add Progress</h3>

<input type="date" id="p_date"><br>
<input type="time" id="p_time"><br>
<input type="text" id="p_location" placeholder="Location"><br>
<input type="text" id="p_activity" placeholder="Activity"><br>

<button onclick="addProgress()">Add Progress</button>

<script>

function updateAWB(){

  const awb = document.getElementById("awb").value.trim();

  if(!awb){
    alert("Enter AWB");
    return;
  }

  let db = JSON.parse(localStorage.getItem("shipments")) || {};

  db[awb] = {
    awb: awb,
    bookingDate: document.getElementById("date").value,
    consignee: document.getElementById("consignee").value,
    destination: document.getElementById("destination").value,
    status: document.getElementById("status").value,
    deliveryDate: document.getElementById("deliveryDate").value,
    receiver: document.getElementById("receiver").value,
    deliveryAwb: document.getElementById("deliveryAwb").value,
    progress: []
  };

  localStorage.setItem("shipments", JSON.stringify(db));

  alert("Shipment Saved");
}

function addProgress(){

  const awb = document.getElementById("awb").value.trim();

  let db = JSON.parse(localStorage.getItem("shipments")) || {};
  if(!db[awb]){
    alert("Save AWB first");
    return;
  }

  db[awb].progress.unshift({
    date: document.getElementById("p_date").value,
    time: document.getElementById("p_time").value,
    location: document.getElementById("p_location").value,
    activity: document.getElementById("p_activity").value
  });

  localStorage.setItem("shipments", JSON.stringify(db));

  alert("Progress Added");
}

</script>

</body>
</html>
