<script>

document.querySelector(".btn-main")?.addEventListener("click", track);

function track(){

  const id = document.getElementById("trackingInput").value.trim();

  let db = JSON.parse(localStorage.getItem("shipments")) || {};

  const s = db[id];

  if(!s){
    alert("Tracking ID not found");
    return;
  }

  document.getElementById("awbNo").innerText = s.awb;
  document.getElementById("bookingDate").innerText = s.bookingDate;
  document.getElementById("consignee").innerText = s.consignee;
  document.getElementById("destination").innerText = s.destination;
  document.getElementById("status").innerText = s.status;
  document.getElementById("deliveryDate").innerText = s.deliveryDate;
  document.getElementById("receiver").innerText = s.receiver;
  document.getElementById("deliveryAwb").innerText = s.deliveryAwb;

  let table = document.getElementById("progressTable");
  table.innerHTML = `
  <tr>
    <th>Date</th>
    <th>Time</th>
    <th>Location</th>
    <th>Activity</th>
  </tr>`;

  s.progress.forEach(p=>{
    let row = table.insertRow(-1);
    row.insertCell(0).innerText = p.date;
    row.insertCell(1).innerText = p.time;
    row.insertCell(2).innerText = p.location;
    row.insertCell(3).innerText = p.activity;
  });

}

</script>
