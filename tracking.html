<!DOCTYPE html>
<html>
<head>
<title>Track Shipment</title>

<style>
body{font-family:Arial;background:#f4f4f4;}
.container{width:80%;margin:auto;background:#fff;padding:20px;border-radius:8px;}
input{padding:8px;width:300px;}
button{background:#28a745;color:#fff;border:none;padding:8px 12px;}
table{width:100%;border-collapse:collapse;margin-top:15px;}
td,th{border:1px solid #28a745;padding:8px;}
th{background:#28a745;color:#fff;}
</style>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDHt3UjTNphPB86gi4jYhas55w3iTR8_hU",
  authDomain: "shipment-tracking-87b0a.firebaseapp.com",
  databaseURL: "https://shipment-tracking-87b0a-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "shipment-tracking-87b0a",
  storageBucket: "shipment-tracking-87b0a.firebasestorage.app",
  messagingSenderId: "20183050446",
  appId: "1:20183050446:web:f868e25a1b07038fa2489f"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
</script>

</head>

<body>

<div class="container">

<h2>Track Shipment</h2>
<input id="trackId" placeholder="Enter AWB">
<button onclick="track()">TRACK</button>

<hr>

<h3>AWB Details</h3>
<p><b>AWB:</b> <span id="awb"></span></p>
<p><b>Booking Date:</b> <span id="booking"></span></p>
<p><b>Consignee:</b> <span id="consignee"></span></p>
<p><b>Destination:</b> <span id="dest"></span></p>
<p><b>Status:</b> <span id="status"></span></p>
<p><b>Delivery Date:</b> <span id="deldate"></span></p>
<p><b>Receiver:</b> <span id="receiver"></span></p>
<p><b>Delivery AWB:</b> <span id="delawb"></span></p>

<hr>

<h3>Shipment Progress</h3>
<table id="progress">
<tr>
<th>Date</th>
<th>Time</th>
<th>Location</th>
<th>Activity</th>
</tr>
</table>

</div>

<script>

function track(){

 const id = document.getElementById("trackId").value.trim();
 if(!id){ alert("Enter Tracking ID"); return; }

 db.ref("shipments/" + id).once("value").then(snapshot => {

   const s = snapshot.val();
   if(!s){
     alert("Tracking ID not recognized");
     return;
   }

   // Fill details
   document.getElementById("awb").innerText = s.awb || "";
   document.getElementById("booking").innerText = s.bookingDate || "";
   document.getElementById("consignee").innerText = s.consignee || "";
   document.getElementById("dest").innerText = s.destination || "";
   document.getElementById("status").innerText = s.status || "";
   document.getElementById("deldate").innerText = s.deliveryDate || "";
   document.getElementById("receiver").innerText = s.receiver || "";
   document.getElementById("delawb").innerText = s.deliveryAwb || "";

   // Load progress
   let table = document.getElementById("progress");

   table.innerHTML = `<tr>
   <th>Date</th><th>Time</th><th>Location</th><th>Activity</th>
   </tr>`;

   if(s.progress){
     Object.keys(s.progress).reverse().forEach(key=>{
       const p = s.progress[key];
       let r = table.insertRow(-1);
       r.insertCell(0).innerText = p.date || "";
       r.insertCell(1).innerText = p.time || "";
       r.insertCell(2).innerText = p.location || "";
       r.insertCell(3).innerText = p.activity || "";
     });
   }

 });

}

window.onload = () => document.getElementById("trackId").value = "";

</script>

</body>
</html>
